<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/open.devies.se\/"},"articleSection":"post","name":"Convert anything to PDF","headline":"Convert anything to PDF","description":"\u003ch3 id=\u0022try-it-out\u0022\u003eTry it out\u003c\/h3\u003e\n\u003cdiv style=\u0022background: #d6d5d4; padding: 10px; margin: 5px; box-shadow: 2px 2px 2px gray; border-radius: 3px; font-weight: bold\u0022\u003e \n\u003cform id=\u0022demo-form\u0022\u003e\n    \u003col\u003e\n        \u003cli\u003e\n            Choose a file \u003cinput id=\u0022upload-file\u0022 type=\u0022file\u0022\u003e\n        \u003c\/li\u003e\n        \u003cli\u003e\n            \u003cspan\u003eEnter the result of the calculation with numbers before clicking convert.\u003c\/span\u003e\n            \u003cbr \/\u003e\n            \u003cspan id=\u0022simple-captcha\u0022\u003e\u003c\/span\u003e\n            \u003cinput style=\u0022padding: 0; min-height: 5px; width: 50px; line-height: 1\u0022 id=\u0022captcha-answer\u0022 type=\u0022text\u0022\u003e\n        \u003c\/li\u003e\n        \u003cli\u003e\n            \u003cspan\u003eClick convert -\u003e\u003c\/span\u003e\n            \u003cinput style=\u0022padding: 0\u0022 id=\u0022send-file\u0022 type=\u0022button\u0022 value=\u0022Convert\u0022 onclick=\u0022onSubmit()\u0022\/\u003e\n        \u003c\/li\u003e\n        \u003cli\u003e\n            \u003cspan\u003eGet your pdf\u003c\/span\u003e\n        \u003c\/li\u003e\n        \u003cli\u003e\n            \u003cspan\u003eBe happy :)\u003c\/span\u003e\n        \u003c\/li\u003e\n    \u003c\/ol\u003e\n\u003c\/form\u003e\n\u003c\/div\u003e\n\u003cscript src=\u0022https:\/\/www.google.com\/recaptcha\/api.js\u0022\u003e\u003c\/script\u003e\n\u003cscript\u003e\n    function onSubmit() {\n        if ($(\u0027input#captcha-answer\u0027).val() == window.buzievagy) {\n            \/\/ todo call api download pdf\n            console.log(\u0027approved\u0027)\n            var reader = new FileReader();\n            reader.onload = event =\u003e {\n                var form = new FormData();\n                form.append(\u0022document\u0022, $(\u0027#upload-file\u0027).prop(\u0027files\u0027)[0]);\n                $.ajax({ \n                    url: \u0027https:\/\/x-foss-convertopdf.whitetree-d4666f7f.northeurope.azurecontainerapps.io\/topdf\u0027,\n                    data: form,\n                    cache: false,\n                    contentType: false,\n                    mimeType: \u0022multipart\/form-data\u0022,\n                    processData: false,\n                    method: \u0027POST\u0027,\n                    type: \u0027POST\u0027,\n                    xhrFields: {\n                        responseType: \u0027blob\u0027\n                    },\n                    success: function(blob, status, xhr) {                        \n                        var filename = \u0022converted.pdf\u0022;                       \n\n                       \n                        var URL = window.URL || window.webkitURL;\n                        var downloadUrl = URL.createObjectURL(blob);\n                        \/\/ use HTML5 a[download] attribute to specify filename\n                        var a = document.createElement(\u0022a\u0022);\n                        \/\/ safari doesn\u0027t support this yet\n                        if (typeof a.download === \u0027undefined\u0027) {\n                            window.location.href = downloadUrl;\n                        } else {\n                            a.href = downloadUrl;\n                            a.download = filename;\n                            document.body.appendChild(a);\n                            a.click();\n                        }                        \n\n                        setTimeout(function () { URL.revokeObjectURL(downloadUrl); }, 100); \/\/ cleanup                        \n                    }\n                })\n            }\n            reader.readAsText($(\u0027#upload-file\u0027).prop(\u0027files\u0027)[0]);\n        }\n    }\n    document.addEventListener(\u0022DOMContentLoaded\u0022, function() {\n        var numbers = [\u0022zero\u0022, \u0022one\u0022, \u0022two\u0022, \u0022three\u0022, \u0022four\u0022, \u0022five\u0022, \u0022six\u0022, \u0022seven\u0022, \u0022eight\u0022, \u0022nine\u0022]\n        var operands = [\u0022\u002b\u0022, \u0022-\u0022, \u0022*\u0022]\n        var left = Math.floor(Math.random()*10)\n        var right = Math.floor(Math.random()*10)\n        var op = operands[Math.floor(Math.random()*3)]\n        window.buzievagy = eval(\u0060${left} ${op} ${right}\u0060)\n        $(\u0027span#simple-captcha\u0027).text(\u0060${numbers[left]} ${op} ${numbers[right]} =\u0060)\n    });\n\u003c\/script\u003e\n\u003cp\u003e\u003cbutton class=\u0022g-recaptcha\u0022\nstyle=\u0022display: none\u0022\ndata-sitekey=\u00226LcZkD0qAAAAAHkQkStv2njGkKuk-aoTWDBK5frg\u0022 \ndata-action=\u0027submit\u0027\u003e\u003c\/button\u003e\u003c\/p\u003e","inLanguage":"en","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"2024","datePublished":"2024-09-06 09:22:43 \u002b0200 \u002b0200","dateModified":"2024-09-06 09:22:43 \u002b0200 \u002b0200","url":"https:\/\/open.devies.se\/post\/2024_09_06_convert_anything_to_pdf\/","wordCount":"272","image":"https:\/\/open.devies.se\/img\/posts\/convert_to_pdf.png","keywords":["docker","office","pdf","convert","api","node","Blog"]}</script><title>Convert anything to PDF </title><meta name=description content><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><link href="https://open.devies.se/css/all.min.css?v1726226865=" rel=stylesheet><link href="https://open.devies.se/css/style.css?v=1726226865" rel=stylesheet id=theme-stylesheet type=text/css media=all><link href="https://open.devies.se/css/custom.css?v=1726226865" rel=stylesheet type=text/css media=all><link rel="shortcut icon" href=https://open.devies.se/img/favicon.ico type=image/x-icon><link rel=icon href=https://open.devies.se/img/favicon.ico type=image/x-icon></head><body class="post-template-default single single-post single-format-standard ct-body singular singular-post not-front standard"><div id=overflow-container class=overflow-container><a class=skip-content href=#main>Skip to content</a><header id=site-header class=site-header role=banner><div class=top-navigation><div class=container><div id=menu-secondary class="menu-container menu-secondary" role=navigation><button id=toggle-secondary-navigation class=toggle-secondary-navigation><i class="fas fa-plus"></i></button><div class=menu><ul id=menu-secondary-items class=menu-secondary-items><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/files>files</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category"><a href=/categories/web>web</a></li></ul></div></div><ul class=social-media-icons><li><a href=https://www.instagram.com/deviesgbg/ data-animate-hover=pulse class=instagram target=_blank><i class="fab fa-instagram" title=instagram></i>
<span class=screen-reader-text>instagram</span></a></li><li><a href=mailto:hello@devies.se data-animate-hover=pulse class=email><i class="fas fa-envelope" title=email></i>
<span class=screen-reader-text>email</span></a></li><li><a href=https://www.linkedin.com/company/deviesdevelopment data-animate-hover=pulse class=linkedin target=_blank><i class="fab fa-linkedin-in" title=linkedin></i>
<span class=screen-reader-text>linkedin</span></a></li><li><a href=https://www.github.com/deviesdevelopment/ data-animate-hover=pulse class=github target=_blank><i class="fab fa-github" title=github></i>
<span class=screen-reader-text>github</span></a></li></ul></div></div><div class=container><div id=title-info class=title-info><div id=site-title class=site-title><a href=/>Devies' open source</a></div></div><button id=toggle-navigation class=toggle-navigation>
<i class="fas fa-bars"></i></button><div id=menu-primary-tracks class=menu-primary-tracks></div><div id=menu-primary class="menu-container menu-primary" role=navigation><div class=menu><ul id=menu-primary-items class=menu-primary-items><li class='menu-item menu-item-type-custom menu-item-object-custom'><a href=https://open.devies.se/>Home</a></li><li class='menu-item menu-item-type-post_type menu-item-object-page'><a href=https://open.devies.se/about/>About</a></li><li class='menu-item menu-item-type-post_type menu-item-object-page'><a href=https://www.devies.se/contact/>Get in touch</a></li></ul></div></div></div></header><div id=main class=main role=main><div id=loop-container class=loop-container><div class="post type-post status-publish format-standard has-post-thumbnail hentry category-design tag-design tag-standard-2 tag-tagalicious tag-travel entry full-without-featured odd excerpt-1"><div class='featured-image lazy lazy-bg-image' data-background=https://open.devies.se/img/posts/convert_to_pdf.png></div><div class=entry-meta><span>/ </span><span class=date>06 September</span> <span>/ </span><span class=author><a href=https://open.devies.se/ title="Posts by Peter Makra" rel=author>Peter Makra</a>
</span><span>/ </span><span class=category><a href=/categories/web>web</a>
</span><span>/ </span><span class=category><a href=/categories/files>files</a>
</span><span>/</span></div><div class=entry-header><h1 class=entry-title>Convert anything to PDF</h1></div><div class=entry-container><div class=entry-content><article><h3 id=try-it-out>Try it out</h3><div style="background:#d6d5d4;padding:10px;margin:5px;box-shadow:2px 2px 2px gray;border-radius:3px;font-weight:700"><form id=demo-form><ol><li>Choose a file <input id=upload-file type=file></li><li><span>Enter the result of the calculation with numbers before clicking convert.</span><br><span id=simple-captcha></span>
<input style=padding:0;min-height:5px;width:50px;line-height:1 id=captcha-answer type=text></li><li><span>Click convert -></span>
<input style=padding:0 id=send-file type=button value=Convert onclick=onSubmit()></li><li><span>Get your pdf</span></li><li><span>Be happy :)</span></li></ol></form></div><script src=https://www.google.com/recaptcha/api.js></script><script>function onSubmit(){if($("input#captcha-answer").val()==window.buzievagy){console.log("approved");var e=new FileReader;e.onload=e=>{var t=new FormData;t.append("document",$("#upload-file").prop("files")[0]),$.ajax({url:"https://x-foss-convertopdf.whitetree-d4666f7f.northeurope.azurecontainerapps.io/topdf",data:t,cache:!1,contentType:!1,mimeType:"multipart/form-data",processData:!1,method:"POST",type:"POST",xhrFields:{responseType:"blob"},success:function(e){var a="converted.pdf",i=window.URL||window.webkitURL,o=i.createObjectURL(e),s=document.createElement("a");typeof s.download=="undefined"?window.location.href=o:(s.href=o,s.download=a,document.body.appendChild(s),s.click()),setTimeout(function(){i.revokeObjectURL(o)},100)}})},e.readAsText($("#upload-file").prop("files")[0])}}document.addEventListener("DOMContentLoaded",function(){var e=["zero","one","two","three","four","five","six","seven","eight","nine"],o=["+","-","*"],t=Math.floor(Math.random()*10),n=Math.floor(Math.random()*10),s=o[Math.floor(Math.random()*3)];window.buzievagy=eval(`${t} ${s} ${n}`),$("span#simple-captcha").text(`${e[t]} ${s} ${e[n]} =`)})</script><p><button class=g-recaptcha style=display:none data-sitekey=6LcZkD0qAAAAAHkQkStv2njGkKuk-aoTWDBK5frg data-action=submit></button></p><blockquote><p>Be aware that the deployed demo instance is with minimal resources.
If it does not work it may be maxxed out, or scaled to zero.
In the second case after few seconds it should work again.
In the first.. well stop ddosing pls.</p></blockquote><h3 id=tldr-for-the-curious-ones>tl;dr for the curious ones</h3><p>Resources:</p><ul><li><a href=https://github.com/mcraa/libre-to-pdf-node class=github target=_blank><i class="fab fa-github" title=github></i>
<span class=screen-reader-text>github logo</span>
mcraa/libre-to-pdf-node</a></li><li><a href=https://hub.docker.com/r/mcraa/libre-to-pdf-node class=github target=_blank><i class="fab fa-docker" title=docker></i>
<span class=screen-reader-text>docker logo</span>
docker pull mcraa/libre-to-pdf-node</a></li><li>special thanks to <a href=https://www.libreoffice.org/>Libre office</a> as most of the work is done by them.</li><li>as well as to the creator of the node<i class="fab fa-node-js" title=nodejs></i> lib used <a href="https://www.npmjs.com/package/office-to-pdf?activeTab=readme"><i class="fab fa-npm" title=npm></i> office-to-pdf</a></li></ul><h4 id=so-what-is-added-here>So what is added here?</h4><p>Simple web server created with one endpoint making that CLI command happening.
So you can use it with one click.</p><p><a href=https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fgist.githubusercontent.com%2Fmcraa%2Ffc199581ecee2ccdb69699d5b66f70d4%2Fraw%2Fe6c87b7485404bdf84230b8b84ca1e7474b94e07%2Farmtemplate-container-pdfconverter.json><img src=https://aka.ms/deploytoazurebutton alt="Deploy to Azure"></a></p><p>Or one <code>docker run</code>.
Or simply adding it to a kubernetes cluster.
You choose your cup of tea.</p><h4 id=background-story>Background story</h4><p>Recently a client who handles documents with sensitive data on their web application
wanted to have previews online of all the files uploaded.
My colleague quickly realized converting to PDF is the way to go,
but all solutions he quickly found were sending the file to an unknown thirdparty blackbox.
Which was not acceptable of course.</p><p>Luckily a very similar problem existed years ago (just check the commit date in the repo).
Search on docker hub improved since then, while writing this I found a similar solution 4 years older.</p><p>So we added a container to the clients cluster, the files never leave our solution, and all files can have preview now as the browser handles pdf easily.</p></article></div><div class=entry-meta-bottom><div class=entry-categories><p><span>Categories</span>
<a href=/categories/web title="View all posts in web">web</a>
<a href=/categories/files title="View all posts in files">files</a></p></div><div class=entry-tags><p><span>Tags</span>
<a href=/tags/docker title="View all posts tagged docker">docker</a>
<a href=/tags/office title="View all posts tagged office">office</a>
<a href=/tags/pdf title="View all posts tagged pdf">pdf</a>
<a href=/tags/convert title="View all posts tagged convert">convert</a>
<a href=/tags/api title="View all posts tagged api">api</a>
<a href=/tags/node title="View all posts tagged node">node</a></p></div></div></div></div><section id=comments class=comments></section></div></div><footer id=site-footer class=site-footer role=contentinfo><h1><a href>Devies' open source</a></h1><div id=menu-footer class="menu-container menu-footer" role=navigation><div class=menu><ul id=menu-footer-items class=menu-footer-items></ul></div></div><ul class=social-media-icons><li><a href=https://www.instagram.com/deviesgbg/ class=instagram target=_blank><i class="fab fa-instagram" title=instagram></i>
<span class=screen-reader-text>instagram</span></a></li><li><a href=mailto:hello@devies.se class=email><i class="fas fa-envelope" title=email></i>
<span class=screen-reader-text>email</span></a></li><li><a href=https://www.linkedin.com/company/deviesdevelopment class=linkedin target=_blank><i class="fab fa-linkedin-in" title=linkedin></i>
<span class=screen-reader-text>linkedin</span></a></li><li><a href=https://www.github.com/deviesdevelopment/ class=github target=_blank><i class="fab fa-github" title=github></i>
<span class=screen-reader-text>github</span></a></li></ul><div class=design-credit><p>Customised version by <a target=_blank href=https://devies.se>Devies</a> of the</p><p>Nederburg Hugo Theme by <a href=# alt="removed dead link">Appernetic</a>.</p><p>A port of Tracks by Compete Themes.</p></div></footer></div><script src=https://open.devies.se/js/jquery.min.js></script><script src=https://open.devies.se/js/jquerymigrate.js></script><script src="https://open.devies.se/js/production.min.js?v=1726226865"></script></body></html>