<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Node on Devies' open source</title><link>https://open.devies.se/tags/node/</link><description>Recent content in Node on Devies' open source</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Fri, 06 Sep 2024 09:22:43 +0200</lastBuildDate><atom:link href="https://open.devies.se/tags/node/index.xml" rel="self" type="application/rss+xml"/><item><title>Convert anything to PDF</title><link>https://open.devies.se/post/2024_09_06_convert_anything_to_pdf/</link><pubDate>Fri, 06 Sep 2024 09:22:43 +0200</pubDate><guid>https://open.devies.se/post/2024_09_06_convert_anything_to_pdf/</guid><description>&lt;h3 id="try-it-out">Try it out&lt;/h3>
&lt;div style="background: #d6d5d4; padding: 10px; margin: 5px; box-shadow: 2px 2px 2px gray; border-radius: 3px; font-weight: bold"> 
&lt;form id="demo-form">
 &lt;ol>
 &lt;li>
 Choose a file &lt;input id="upload-file" type="file">
 &lt;/li>
 &lt;li>
 &lt;span>Enter the result of the calculation with numbers before clicking convert.&lt;/span>
 &lt;br />
 &lt;span id="simple-captcha">&lt;/span>
 &lt;input style="padding: 0; min-height: 5px; width: 50px; line-height: 1" id="captcha-answer" type="text">
 &lt;/li>
 &lt;li>
 &lt;span>Click convert ->&lt;/span>
 &lt;input style="padding: 0" id="send-file" type="button" value="Convert" onclick="onSubmit()"/>
 &lt;/li>
 &lt;li>
 &lt;span>Get your pdf&lt;/span>
 &lt;/li>
 &lt;li>
 &lt;span>Be happy :)&lt;/span>
 &lt;/li>
 &lt;/ol>
&lt;/form>
&lt;/div>
&lt;script src="https://www.google.com/recaptcha/api.js">&lt;/script>
&lt;script>
 function onSubmit() {
 if ($('input#captcha-answer').val() == window.buzievagy) {
 // todo call api download pdf
 console.log('approved')
 var reader = new FileReader();
 reader.onload = event => {
 var form = new FormData();
 form.append("document", $('#upload-file').prop('files')[0]);
 $.ajax({ 
 url: 'https://x-foss-convertopdf.whitetree-d4666f7f.northeurope.azurecontainerapps.io/topdf',
 data: form,
 cache: false,
 contentType: false,
 mimeType: "multipart/form-data",
 processData: false,
 method: 'POST',
 type: 'POST',
 xhrFields: {
 responseType: 'blob'
 },
 success: function(blob, status, xhr) { 
 var filename = "converted.pdf"; 

 
 var URL = window.URL || window.webkitURL;
 var downloadUrl = URL.createObjectURL(blob);
 // use HTML5 a[download] attribute to specify filename
 var a = document.createElement("a");
 // safari doesn't support this yet
 if (typeof a.download === 'undefined') {
 window.location.href = downloadUrl;
 } else {
 a.href = downloadUrl;
 a.download = filename;
 document.body.appendChild(a);
 a.click();
 } 

 setTimeout(function () { URL.revokeObjectURL(downloadUrl); }, 100); // cleanup 
 }
 })
 }
 reader.readAsText($('#upload-file').prop('files')[0]);
 }
 }
 document.addEventListener("DOMContentLoaded", function() {
 var numbers = ["zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine"]
 var operands = ["+", "-", "*"]
 var left = Math.floor(Math.random()*10)
 var right = Math.floor(Math.random()*10)
 var op = operands[Math.floor(Math.random()*3)]
 window.buzievagy = eval(`${left} ${op} ${right}`)
 $('span#simple-captcha').text(`${numbers[left]} ${op} ${numbers[right]} =`)
 });
&lt;/script>
&lt;p>&lt;button class="g-recaptcha"
style="display: none"
data-sitekey="6LcZkD0qAAAAAHkQkStv2njGkKuk-aoTWDBK5frg" 
data-action='submit'>&lt;/button>&lt;/p></description></item></channel></rss>